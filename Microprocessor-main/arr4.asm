.model small
.386
.data
ARR1 DB 20 DUP (?)
ARR2 DB 20 DUP (?)
DATA1 DW 0000H
DATA2 DW 0000H

msg1 db 10, 13, "Enter the size of the arrays: $"
msg2 db 10, 13, "Enter the first array: $"
msg3 db 10, 13, "The entered array is: $"
msg4 db 10, 13, "Enter the second array: $"
msg5 db 10, 13, "The difference of both array is: $"

.code
.startup
MOV AH, 09
MOV DX, OFFSET msg1
INT 21H

MOV CX, 2
AGAIN: MOV AH, 01
INT 21H
CMP AL, 'A'
JGE L1
SUB AL, 30H
JMP L2
L1: SUB AL, 37H
L2: SHL BX, 4
ADD BL, AL
LOOP AGAIN

MOV AL, BL
MOV CL, AL
MOV AH, 0
MOV DATA1, AX
MOV CX, DATA1

MOV AH, 09
MOV DX, OFFSET msg2
INT 21H

MOV CX, DATA1
LEA SI, ARR1
AGAIN1: MOV AH, 02H
MOV DL, 0AH ; jump onto next line
INT 21H
MOV AH, 01H
INT 21H
SUB AL, 30H
MOV [SI], AL
INC SI
LOOP AGAIN1

MOV AH, 09
MOV DX, OFFSET msg3
INT 21H

MOV CX, DATA1
LEA SI, ARR1
AGAIN2: MOV AH, 02H
MOV DL, 0AH
INT 21H
MOV DL, [SI]
ADD DL, 30H
MOV AH, 02H
INT 21H
INC SI
LOOP AGAIN2

MOV AH, 09
MOV DX, OFFSET msg4
INT 21H

MOV CX, DATA1
LEA DI, ARR2
AGAIN3: MOV AH, 02H
MOV DL, 0AH
INT 21H
MOV AH, 01H
INT 21H
SUB AL, 30H
MOV [DI], AL
INC DI
LOOP AGAIN3

MOV AH, 09H
MOV DX, OFFSET msg3
INT 21H

MOV CX, DATA1
LEA DI, ARR2
AGAIN4: MOV AH, 02H
MOV DL, 0AH
INT 21H
MOV DL, 0DH
INT 21H
MOV DX, [DI]
ADD DL, 30H
INT 21H
INC DI
LOOP AGAIN4

LEA SI, ARR1
LEA DI, ARR2

MOV CX, DATA1
SUBB: MOV AL, [SI]
SUB AL, [DI]
MOV [SI], AL
INC DI
INC SI
LOOP SUBB

MOV AH, 09H
MOV DX, OFFSET msg5
INT 21H

MOV CX, DATA1
LEA SI, ARR1
AGAIN5: MOV AH, 02H
MOV DL, 0AH
INT 21H
MOV DATA2, CX
MOV BL, [SI]

MOV CX, 2
SUBB1: ROL BL, 4
MOV DL, BL
AND DL, 0FH
CMP DL, 09
JA L3
ADD DL, 30H
JMP L4
L3: ADD DL, 37H
L4: MOV AH, 02
INT 21H
LOOP SUBB1
MOV CX, DATA2
INC SI
LOOP AGAIN5

.EXIT
END